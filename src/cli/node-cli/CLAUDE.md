# Node CLI 模块 (node-cli/)

> [返回父模块目录](../) > [返回cli模块目录](../) > **node-cli**

## 模块职责

Node CLI 模块提供 OpenClaw 节点的命令行管理功能，用于管理本地运行节点、节点状态监控、设备配对等操作。

## 目录结构

```
node-cli/
├── node-cli.ts           # 节点 CLI 主入口
├── nodes-cli/           # 节点管理 CLI（子目录）
└── 其他相关文件
```

## 主要命令

### 节点管理

```bash
# 列出所有节点
openclaw nodes list

# 查看节点状态
openclaw nodes status <node-id>

# 启动节点
openclaw nodes start <node-id>

# 停止节点
openclaw nodes stop <node-id>

# 重启节点
openclaw nodes restart <node-id>
```

### 设备配对

```bash
# 配对新设备
openclaw pairing start

# 确认配对
openclaw pairing confirm <pairing-code>

# 取消配对
openclaw pairing cancel
```

### 节点相机

```bash
# 查看相机状态
openclaw nodes camera status

# 启用相机
openclaw nodes camera enable

# 禁用相机
openclaw nodes camera disable
```

### 节点画布

```bash
# 查看画布状态
openclaw nodes canvas status

# 获取画布截图
openclaw nodes canvas screenshot
```

## 关键函数

### 节点注册

```typescript
function registerNodeCli(program: Command): void;
```

### 节点状态获取

```typescript
async function getNodesStatus(): Promise<NodesStatus>;
async function getNodeInfo(nodeId: string): Promise<NodeInfo>;
```

### 节点控制

```typescript
async function startNode(nodeId: string): Promise<void>;
async function stopNode(nodeId: string): Promise<void>;
async function restartNode(nodeId: string): Promise<void>;
```

## 配置文件

节点配置通过以下位置管理：

- **`~/.config/openclaw/nodes.json`** - 节点配置
- **`~/.local/share/openclaw/nodes/`** - 节点数据目录

## 使用示例

### 编程方式使用

```typescript
import { registerNodeCli } from './node-cli/node-cli.js';
import { program } from './cli/program.js';

registerNodeCli(program);
program.parse(process.argv);
```

### 获取节点状态

```typescript
import { getNodesStatus } from './node-cli/nodes-cli/status.js';

const status = await getNodesStatus();
console.log('Active nodes:', status.active.length);
console.log('Inactive nodes:', status.inactive.length);
```

## 与其他模块的交互

- **`src/cli/program.ts`**: CLI 程序入口，集成节点命令
- **`src/nodes/`**: 节点运行时实现
- **`src/pairing/`**: 设备配对系统
- **`src/nodes-canvas/`**: 节点画布功能
- **`src/nodes-camera/`**: 节点相机功能

## 测试

```bash
# 运行节点 CLI 测试
pnpm test src/cli/node-cli/*.test.ts
pnpm test src/cli/nodes-cli/*.test.ts
```

## 常见问题 (FAQ)

### Q: 节点无法启动？
A: 检查节点配置文件是否存在，确认端口未被占用。

### Q: 如何添加新节点？
A: 使用 `openclaw pairing start` 启动配对流程。

### Q: 节点状态显示离线怎么办？
A: 检查节点服务是否运行，查看日志获取详细错误信息。

## 相关文件

- `src/cli/program.ts` - CLI 程序
- `src/nodes/` - 节点运行时
- `src/pairing/` - 设备配对
- `src/nodes-canvas/` - 画布功能
- `src/nodes-camera/` - 相机功能


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 11, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #2637 | 12:23 AM | ✅ | Committed comprehensive Chinese documentation for 6 OpenClaw modules to git | ~493 |
| #2590 | 12:08 AM | ✅ | Created comprehensive Chinese documentation for 6 OpenClaw modules | ~652 |
| #2587 | 12:07 AM | ✅ | Created comprehensive Chinese documentation for 6 OpenClaw modules | ~576 |
</claude-mem-context>