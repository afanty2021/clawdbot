# LLM Task 扩展

[返回目录](../CLAUDE.md) > **extensions/llm-task**

## 模块职责

JSON-only LLM 任务工具插件，提供结构化任务处理能力。

## 功能概述

### 工具集成
- **沙箱检测**：沙箱环境下返回 null
- **可选注册**：`optional: true` 标记
- **JSON 处理**：仅处理 JSON 格式的任务

### 任务工具
- **createLlmTaskTool**：创建 LLM 任务工具
- **AnyAgentTool**：通用代理工具接口

## 关键依赖

### OpenClaw 类型系统
- `AnyAgentTool` - 通用代理工具接口
- `OpenClawPluginApi` - 插件 API 接口
- `OpenClawPluginToolFactory` - 工具工厂接口

## 对外接口

### 工具注册
```typescript
api.registerTool(
  createLlmTaskTool(api) as AnyAgentTool,
  { optional: true },
);
```

### 工具实现
```typescript
// src/llm-task-tool.ts
export function createLlmTaskTool(api: OpenClawPluginApi): AnyAgentTool;
```

## 使用说明

### 自动加载
插件注册后自动创建工具，无需额外配置。

### 沙箱检测
```typescript
if (ctx.sandboxed) {
  return null;  // 沙箱环境下不提供工具
}
```

### JSON 格式
工具仅接受 JSON 格式的任务输入：
```json
{
  "task": "description",
  "params": { /* ... */ }
}
```

## 注意事项

1. **沙箱限制**：沙箱环境下工具不可用
2. **JSON 格式**：仅接受有效的 JSON 输入
3. **可选工具**：标记为可选，不影响核心功能

## 相关文件

### 核心文件
- `index.ts` - 插件入口
- `src/llm-task-tool.ts` - 工具实现

### 配置文件
- `package.json` - 插件清单

## 变更记录

### 2026-02-13 - 初始创建
- ✅ 创建 LLM Task 扩展文档
- 📋 记录工具注册和沙箱检测
- 🔗 建立与任务处理的关联


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>